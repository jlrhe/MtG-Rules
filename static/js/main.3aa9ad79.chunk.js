(this["webpackJsonpmtg-rules-front"]=this["webpackJsonpmtg-rules-front"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(5),c=n.n(i),s=(n(11),n(2)),o=(n(12),function(e){if(e.length<=0||void 0===e)return[{id:1,title:"loading...",chapters:[{id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}]}];for(var t=e.replace("\r\n \r\n","\r\n\r\n").split("\r\n\r\n").map((function(e){var t=e.trim();return"\r\n"===e.slice(0,3)&&(t=e.slice(3)).trim(),t})).filter((function(e){return!isNaN(e[0])})),n=0;n<9;n++)t.shift();var r=[];return t.forEach((function(e){if(" "===e[2])r.push({id:parseInt(e.slice(0,1)),title:e.slice(3),chapters:[]});else if(" "===e[3])r.push({id:parseInt(e.slice(0,2)),title:e.slice(4),chapters:[]});else if(isNaN(e.slice(0,3))||" "!==e[4]){if(!isNaN(e.slice(0,3))&&!isNaN(e[4])){var t=parseInt(e[0])-1,n=parseInt(e.slice(1,3));if(void 0!==r[t].chapters[n]){var a={id:e.slice(0,e.indexOf(" ")),rule:e.slice(e.indexOf(" ")+1),example:""};-1!==a.rule.indexOf("Example")&&(a.rule=e.slice(e.indexOf(" ")+1,e.indexOf("Example")),a.example=e.slice(e.indexOf("Example"))),r[t].chapters[n].rules.push(a)}}}else{var i=parseInt(e[0])-1;r[i].chapters.push({id:parseInt(e.slice(0,3)),title:e.slice(5),rules:[]})}})),r}),l=(n(13),n(6)),u=n.n(l),h=n(0),d=function(e){var t=e.id,n=e.rule,r=e.example,a=e.searchString;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.a,{search:a,children:t+" "+n}),Object(h.jsx)("p",{className:"example",children:r})]})},p=(n(23),function(e){var t=e.id,n=e.title,r=e.sectionTitle,a=e.rules,i=e.searchString,c=a.filter((function(e){return e.rule.toLowerCase().includes(i.toLowerCase())}));return Object(h.jsxs)("section",{className:"chapter",children:[Object(h.jsx)("h2",{children:r}),Object(h.jsx)("h3",{children:t+". "+n}),c.map((function(e){var t=e.id,n=e.rule,r=e.example;return Object(h.jsx)(d,{id:t,rule:n,example:r,searchString:i},t)}))]})}),f=n(4),j=n.n(f),g=(n(24),function(e){var t=e.id,n=e.title,r=e.chapterChange;return Object(h.jsx)("button",{className:"chapter-selector",onClick:function(){r(t)},children:t+" "+n})}),b=(n(25),function(e){var t=e.id,n=e.title,r=e.chapters,a=e.chapterChange,i=function(e){a(e)};return Object(h.jsx)("section",{className:"section",children:Object(h.jsxs)(j.a,{className:"closed",openedClassName:"open",trigger:t+". "+n,transitionTime:"200",children:[Object(h.jsx)("span",{className:"material-icons section-dropdown-icon",children:"arrow_drop_down"}),r.map((function(e){var t=e.id,n=e.title;return Object(h.jsx)(g,{chapterChange:i,id:t,title:n},t)}))]})})}),x=(n(26),function(e){var t=e.parsedRules,n=(e.sectionChange,e.chapterChange),r=(e.nextChapter,e.previousChapter,function(e){n(e)});return Object(h.jsx)("div",{className:"table-of-contents",children:Object(h.jsxs)(j.a,{trigger:"Contents",classParentString:"Contents",openedClassName:"open",transitionTime:"200",open:"true",children:[Object(h.jsx)("span",{className:"material-icons contents-dropdown-icon",children:"arrow_drop_down"}),t.map((function(e){var t=e.id,n=e.title,a=e.chapters;return Object(h.jsx)(b,{id:t,title:n,chapters:a,chapterChange:r},t)}))]})})}),O=(n(27),function(e){var t=e.placeholder,n=e.handleChange;return Object(h.jsx)("div",{className:"search-bar",children:Object(h.jsx)("input",{className:"search",type:"search",placeholder:t,onChange:n})})}),m=(n(28),n(29),function(e){var t=e.type,n=e.handleClick,r=e.text,a=e.disabled,i=void 0!==a&&a,c=e.hidden;return void 0!==c&&c?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)("button",{disabled:i,className:t,onClick:n,children:r})}),v=function(e){var t=e.nextChapter,n=e.previousChapter;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(m,{type:"navigation",text:"<= Chapter",handleClick:function(){n()}}),Object(h.jsx)(m,{type:"navigation",text:"Chapter=>",handleClick:function(){t()}})]})},C=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(1),c=Object(s.a)(i,2),l=c[0],u=c[1],d=Object(r.useState)(100),f=Object(s.a)(d,2),j=f[0],g=f[1],b=Object(r.useState)(""),m=Object(s.a)(b,2),C=m[0],N=m[1],w=Object(r.useState)({id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}),S=Object(s.a)(w,2),I=S[0],k=S[1],y=Object(r.useState)("https://frozen-dawn-34650.herokuapp.com/media.wizards.com/2021/downloads/MagicCompRules%2020210419.txt"),E=Object(s.a)(y,2),R=E[0],T=(E[1],Object(r.useState)([{id:1,title:"loading...",chapters:[{id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}]}])),L=Object(s.a)(T,2),_=L[0],M=L[1],P=function(e){console.log("set Section: ",e),u(parseInt(e))},z=function(e,t){return console.log("findchapterdata: ",_),console.log("findchapterSection: ",e),console.log("findchapter: ",t),_.find((function(t){return t.id===parseInt(e)})).chapters.find((function(e){return e.id===parseInt(t)}))},F=function(){void 0===z(l,j+1)?console.log("last chapter"):(console.log("next chapter"),g(j+1))},J=function(){j===100*l?console.log("first chapter"):g(j-1)},A=function(e){if(!e.ok)throw alert("There was an error fetching the rules. \n Please try again when the winds of magic are more favorable."),Error(e.statusText);return e};return Object(r.useEffect)((function(){fetch(R).then(A).then((function(e){return e.text()})).then((function(e){a(e),console.log("rules set")})).catch((function(e){alert("There was an error fetching the rules. \n Please try again when the winds of magic are more favorable."),console.log(e)}))}),[R]),Object(r.useEffect)((function(){M(o(n)),console.log("parsing rules")}),[n]),Object(r.useEffect)((function(){k(z(l,j)),console.log("parsed rules change: chapter data update")}),[_,j,l]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{className:"page-header",children:"MtG Rules"}),Object(h.jsx)(O,{placeholder:"Search shown rules by typing here",handleChange:function(e){N(e.target.value),console.log(C)}}),Object(h.jsxs)("div",{className:"main-container",children:[Object(h.jsxs)("div",{className:"main-view",children:[Object(h.jsx)(v,{nextChapter:F,previousChapter:J}),Object(h.jsx)(p,{id:I.id,title:I.title,sectionTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return _.find((function(t){return t.id===e}))}(l).title,rules:I.rules,searchString:C}),Object(h.jsx)(v,{className:"bottom-navigation",nextChapter:F,previousChapter:J})]}),Object(h.jsx)(x,{parsedRules:_,nextChapter:F,previousChapter:J,sectionChange:P,chapterChange:function(e){console.log("chapterChange section argument: ",parseInt(e.toString()[0])),parseInt(e.toString()[0])!==l&&P(parseInt(e.toString()[0])),console.log("set chapter: ",j),g(e)}})]})]})};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.3aa9ad79.chunk.js.map