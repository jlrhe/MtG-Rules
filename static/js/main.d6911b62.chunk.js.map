{"version":3,"sources":["parser/parser.js","components/rule/rule.component.jsx","components/chapter/chapter.component.jsx","components/chapter-selector/chapter-selector.component.jsx","components/section/section.component.jsx","components/table-of-contents/table-of-contents.component.jsx","components/search-box/search-box.component.jsx","components/button/button.component.jsx","components/navigation-buttons/navigation-buttons.jsx","App.js","index.js"],"names":["parser","rawRules","length","undefined","id","title","chapters","rules","rule","filteredRules","replace","split","map","element","trimmedElement","trim","slice","filter","value","isNaN","i","shift","parsedRules","forEach","push","parseInt","section","chapterIndex","indexOf","example","Rule","searchString","search","className","Chapter","sectionTitle","toLowerCase","includes","console","log","Object","keys","ChapterSelector","chapterChange","onClick","Section","openedClassName","trigger","transitionTime","TableOfContents","classParentString","open","SearchBox","placeholder","handleChange","type","onChange","Button","handleClick","text","disabled","hidden","NavigationButtons","nextChapter","previousChapter","nextSection","previousSection","App","useState","setRules","selectedSection","setSelectedSection","selectedChapter","setSelectedChapter","searchField","setSearchField","selectedChapterData","setSelectedChapterData","staticRulesUrl","setParsedRules","findChapter","sectionToFind","chapterToFind","find","chapter","findSection","handleFetchError","response","ok","alert","Error","statusText","useEffect","fetch","then","textString","catch","error","Math","floor","e","target","toString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d6911b62.chunk.js","sourcesContent":["const parser = (rawRules) => {\r\n  //if the rules haven't been fetched yet\r\n  if (rawRules.length <= 0 || rawRules === undefined) {\r\n    return [\r\n      {\r\n        id: 1,\r\n        title: \"loading...\",\r\n        chapters: [\r\n          {\r\n            id: 100,\r\n            title: \"loading...\",\r\n            rules: [{ id: \"100.1.\", rule: \"Loading Rules...\" }],\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n  }\r\n  //there is an additional whitespace between the two linebreaks before 505. This fixes it.\r\n  const fixedTypoRules = rawRules.replace(\"\\r\\n \\r\\n\", \"\\r\\n\\r\\n\");\r\n  const splittedRules = fixedTypoRules.split(\"\\r\\n\\r\\n\");\r\n  //some \"wanted\" elements start with linebreaks or spaces so let's get rid of those\r\n  let trimmedRules = splittedRules.map((element) => {\r\n    let trimmedElement = element.trim();\r\n    //oddly enough \"\\r\\n\" is 3 characters\r\n    if (element.slice(0, 3) === \"\\r\\n\") {\r\n      trimmedElement = element.slice(3);\r\n      trimmedElement.trim(); //in case there are spaces after linebreak\r\n    }\r\n    return trimmedElement;\r\n  });\r\n\r\n  //Filter out everything that doesn't start with a number\r\n  let filteredRules = trimmedRules.filter((value) => !isNaN(value[0]));\r\n\r\n  //removing the contents listing. There must be a better way to do this - I'll come back to this when time allows.\r\n  for (let i = 0; i < 9; i++) {\r\n    filteredRules.shift();\r\n  }\r\n\r\n  //console.log(\"parser, filtered: \", filteredRules);\r\n\r\n  //Let's now build a JSON object from the rules\r\n  let parsedRules = [];\r\n\r\n  //create sections\r\n  filteredRules.forEach((element) => {\r\n    //section numbers are of form \"x. \". if the rules ever expand to double digit sections this is covered..\r\n    if (element[2] === \" \") {\r\n      parsedRules.push({\r\n        id: parseInt(element.slice(0, 1)),\r\n        title: element.slice(3),\r\n        chapters: [],\r\n      });\r\n    } else if (element[3] === \" \") {\r\n      parsedRules.push({\r\n        id: parseInt(element.slice(0, 2)),\r\n        title: element.slice(4),\r\n        chapters: [],\r\n      });\r\n    }\r\n    //chapter numbers are of form \"xxx. \"\r\n    else if (!isNaN(element.slice(0, 3)) && element[4] === \" \") {\r\n      let section = parseInt(element[0]) - 1;\r\n      parsedRules[section].chapters.push({\r\n        id: parseInt(element.slice(0, 3)),\r\n        title: element.slice(5),\r\n        rules: [],\r\n      });\r\n      //rule numbers are of form \"xxx.x...\" (x is a number).\r\n    } else if (!isNaN(element.slice(0, 3)) && !isNaN(element[4])) {\r\n      let section = parseInt(element[0]) - 1;\r\n      let chapterIndex = parseInt(element.slice(1, 3));\r\n      if (parsedRules[section].chapters[chapterIndex] !== undefined) {\r\n        //there are undefineds so this is neccessary, but it also means there's an issue which I'll have to look into at some point\r\n        let rule = {\r\n          id: element.slice(0, element.indexOf(\" \")),\r\n          rule: element.slice(element.indexOf(\" \") + 1),\r\n          example: \"\",\r\n        };\r\n        if (rule.rule.indexOf(\"Example\") !== -1) {\r\n          //if there's an example\r\n          rule.rule = element.slice(\r\n            element.indexOf(\" \") + 1,\r\n            element.indexOf(\"Example\")\r\n          );\r\n          rule.example = element.slice(element.indexOf(\"Example\"));\r\n        }\r\n        parsedRules[section].chapters[chapterIndex].rules.push(rule);\r\n      }\r\n    }\r\n  });\r\n  //console.log(\"parser: \", parsedRules);\r\n  return parsedRules;\r\n  //hard coded for development\r\n  /*   let parsed = [\r\n    {\r\n      id: \"1.\",\r\n      title: \"Game Concepts\",\r\n      chapters: [\r\n        {\r\n          id: \"100.\",\r\n          title: \"General\",\r\n          rules: [\r\n            {\r\n              id: \"100.1.\",\r\n              rule: \"These Magic rules apply to any Magic...\",\r\n              example: \"\",\r\n            },\r\n            {\r\n              id: \"100.1a\",\r\n              rule: \"A two-player game is a game that begins with only two players.\",\r\n              example: \"\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: \"101.\",\r\n          title: \"The Magic Golden Rules\",\r\n          rules: [\r\n            {\r\n              id: \"101.1\",\r\n              rule: \"Whenever a card’s text directly contradicts these ...\",\r\n              example: \"\",\r\n            },\r\n            {\r\n              id: \"101.2\",\r\n              rule: \"When a rule or effect allows or directs something to...\",\r\n              example: \"\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      id: \"2.\",\r\n      title: \"Parts of a Card\",\r\n      chapters: [\r\n        {\r\n          id: \"200.\",\r\n          title: \"General\",\r\n          rules: [\r\n            {\r\n              id: \"200.1.\",\r\n              rule: \"The parts of a card are name, mana cost, illustration, color indicator...\",\r\n              example: \"\",\r\n            },\r\n            {\r\n              id: \"200.2\",\r\n              rule: \"Some parts of a card are also characteristics of the object that...\",\r\n              example: \"\",\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          id: \"201.\",\r\n          title: \"Name\",\r\n          rules: [\r\n            {\r\n              id: \"201.1\",\r\n              rule: \"The name of a card is printed...\",\r\n              example: \"\",\r\n            },\r\n            {\r\n              id: \"201.2\",\r\n              rule: \"A card’s name is always considered to be the English...\",\r\n              example:\r\n                \"Example: when you test an app it ahelps to have example texts\",\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n  return parsed; */\r\n};\r\n\r\nexport default parser;\r\n","import React from \"react\";\r\nimport \"./rule.styles.css\";\r\nimport Highlight from \"react-highlighter\";\r\n\r\nconst Rule = ({ id, rule, example, searchString }) => {\r\n  return (\r\n    <>\r\n      <Highlight search={searchString}>{id + \" \" + rule}</Highlight>\r\n      <p className=\"example\">{example}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Rule;\r\n","import React from \"react\";\r\nimport Rule from \"../rule/rule.component\";\r\nimport \"./chapter.styles.css\";\r\n\r\nconst Chapter = ({ id, title, sectionTitle, rules, searchString }) => {\r\n  const filteredRules = rules.filter((rule) =>\r\n    rule.rule.toLowerCase().includes(searchString.toLowerCase())\r\n  );\r\n  console.log(filteredRules);\r\n  if (Object.keys(filteredRules).length === 0) {\r\n    return (\r\n      <section className=\"chapter\">\r\n        <h2>{sectionTitle}</h2>\r\n        <h3>{id + \". \" + title}</h3>\r\n        <p>This chapter has no rules.</p>\r\n      </section>\r\n    );\r\n  } else {\r\n    return (\r\n      <section className=\"chapter\">\r\n        <h2>{sectionTitle}</h2>\r\n        <h3>{id + \". \" + title}</h3>\r\n        {filteredRules.map(({ id, rule, example }) => (\r\n          <Rule\r\n            key={id}\r\n            id={id}\r\n            rule={rule}\r\n            example={example}\r\n            searchString={searchString}\r\n          />\r\n        ))}\r\n      </section>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Chapter;\r\n","import React from \"react\";\r\nimport \"./chapter-selector.styles.css\";\r\n\r\nconst ChapterSelector = ({ id, title, chapterChange }) => {\r\n  const handleClick = () => {\r\n    chapterChange(id);\r\n  };\r\n  return (\r\n    <button className=\"chapter-selector\" onClick={handleClick}>\r\n      {id + \" \" + title}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ChapterSelector;\r\n","import React from \"react\";\r\nimport ChapterSelector from \"../chapter-selector/chapter-selector.component\";\r\nimport \"./section.styles.css\";\r\nimport Collapsible from \"react-collapsible\";\r\n\r\nconst Section = ({ id, title, chapters, chapterChange }) => {\r\n  return (\r\n    <section className=\"section\">\r\n      <Collapsible\r\n        className=\"closed\"\r\n        openedClassName=\"open\"\r\n        trigger={id + \". \" + title}\r\n        transitionTime=\"200\"\r\n      >\r\n        <span className=\"material-icons section-dropdown-icon\">\r\n          arrow_drop_down\r\n        </span>\r\n        {chapters.map(({ id, title }) => (\r\n          <ChapterSelector\r\n            chapterChange={chapterChange}\r\n            key={id}\r\n            id={id}\r\n            title={title}\r\n          />\r\n        ))}\r\n      </Collapsible>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Section;\r\n","import React from \"react\";\r\nimport Collapsible from \"react-collapsible\";\r\nimport Section from \"../section/section.component\";\r\nimport \"./table-of-contents.styles.css\";\r\n\r\nconst TableOfContents = ({ parsedRules, chapterChange }) => {\r\n  return (\r\n    <div className=\"table-of-contents\">\r\n      <Collapsible\r\n        trigger=\"Contents\"\r\n        classParentString=\"Contents\"\r\n        openedClassName=\"open\"\r\n        transitionTime=\"200\"\r\n        open=\"true\"\r\n      >\r\n        <span className=\"material-icons contents-dropdown-icon\">\r\n          arrow_drop_down\r\n        </span>\r\n        {parsedRules.map(({ id, title, chapters }) => (\r\n          <Section\r\n            key={id}\r\n            id={id}\r\n            title={title}\r\n            chapters={chapters}\r\n            chapterChange={chapterChange}\r\n          />\r\n        ))}\r\n      </Collapsible>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableOfContents;\r\n","import React from \"react\";\r\nimport \"./search-box.styles.css\";\r\n\r\nconst SearchBox = ({ placeholder, handleChange }) => (\r\n  <div className=\"search-bar\">\r\n    <input\r\n      className=\"search\"\r\n      type=\"search\"\r\n      placeholder={placeholder}\r\n      onChange={handleChange}\r\n    />\r\n  </div>\r\n);\r\nexport default SearchBox;\r\n","import React from \"react\";\r\nimport \"./button.styles.css\";\r\n\r\nconst Button = ({\r\n  type,\r\n  handleClick,\r\n  text,\r\n  disabled = false,\r\n  hidden = false,\r\n}) => {\r\n  if (hidden) {\r\n    return <></>;\r\n  } else\r\n    return (\r\n      <button disabled={disabled} className={type} onClick={handleClick}>\r\n        {text}\r\n      </button>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport \"./navigation-buttons.css\";\r\nimport Button from \"../button/button.component\";\r\n\r\nconst NavigationButtons = ({\r\n  nextChapter,\r\n  previousChapter,\r\n  nextSection,\r\n  previousSection,\r\n}) => {\r\n  return (\r\n    <div className=\"container\">\r\n      <Button\r\n        type=\"navigation\"\r\n        text=\"&lt;= Chapter\"\r\n        handleClick={previousChapter}\r\n      />\r\n      <Button\r\n        type=\"navigation\"\r\n        text=\"&lt;=&lt;= Section\"\r\n        handleClick={previousSection}\r\n      />\r\n      <Button\r\n        type=\"navigation\"\r\n        text=\"Section=&gt;=&gt;\"\r\n        handleClick={nextSection}\r\n      />\r\n\r\n      <Button type=\"navigation\" text=\"Chapter=&gt;\" handleClick={nextChapter} />\r\n    </div>\r\n  );\r\n};\r\nexport default NavigationButtons;\r\n","/*\nTODO: \n  possibility to show all rules at the same time and search them\n  fix parser (chapter 505 -> affects 506-514)\n  second styling pass (at least a dark mode)\n  Extra features (hyperlink when a rule references another, possibility for user to select alternative file by URL)\n  optimize parser and make it more robust so there's maybe a possibility of reading a different txt file...\n*/\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport parser from \"./parser/parser\";\nimport Chapter from \"./components/chapter/chapter.component\";\nimport TableOfContents from \"./components/table-of-contents/table-of-contents.component\";\nimport SearchBox from \"./components/search-box/search-box.component\";\nimport NavigationButtons from \"./components/navigation-buttons/navigation-buttons\";\n\nconst App = () => {\n  const [rules, setRules] = useState(\"\");\n  const [selectedSection, setSelectedSection] = useState(1); //separate from selectedChapter to allow dynamic Contents view\n  const [selectedChapter, setSelectedChapter] = useState(100);\n  const [searchField, setSearchField] = useState(\"\");\n  const [selectedChapterData, setSelectedChapterData] = useState({\n    id: 100,\n    title: \"loading...\",\n    rules: [{ id: \"100.1.\", rule: \"Loading Rules...\" }],\n  });\n  /*cors proxy is fine for fetching static data without credentials, commented out since currently there's no way for the user to change this\n  const [rulesUrl, setRulesUrl] = useState(\n    \"https://frozen-dawn-34650.herokuapp.com/media.wizards.com/2021/downloads/MagicCompRules%2020210419.txt\"\n  );*/\n  const staticRulesUrl =\n    \"https://frozen-dawn-34650.herokuapp.com/media.wizards.com/2021/downloads/MagicCompRules%2020210419.txt\";\n  //placeholder object needed, because I anticipate fetching and parsing the rules to potentially take a few seconds\n  const [parsedRules, setParsedRules] = useState([\n    {\n      id: 1,\n      title: \"loading...\",\n      chapters: [\n        {\n          id: 100,\n          title: \"loading...\",\n          rules: [{ id: \"100.1.\", rule: \"Loading Rules...\" }],\n        },\n      ],\n    },\n  ]);\n\n  const handleSectionChange = (section) => {\n    setSelectedSection(parseInt(section));\n  };\n\n  const handleChapterChange = (chapter) => {\n    if (parseInt(chapter.toString()[0]) !== selectedSection) {\n      handleSectionChange(parseInt(chapter.toString()[0]));\n    }\n    /*     console.log(\"set chapter: \", selectedChapter); */\n    setSelectedChapter(chapter);\n  };\n\n  const findChapter = (sectionToFind, chapterToFind) => {\n    return parsedRules\n      .find((section) => section.id === parseInt(sectionToFind))\n      .chapters.find((chapter) => chapter.id === parseInt(chapterToFind));\n  };\n\n  const findSection = (sectionToFind = selectedSection) => {\n    return parsedRules.find((section) => section.id === sectionToFind);\n  };\n\n  const nextSection = () => {\n    if (findSection(selectedSection + 1) === undefined) {\n      /*       console.log(\"last section\"); */\n    } else {\n      setSelectedSection(selectedSection + 1);\n      setSelectedChapter((selectedSection + 1) * 100);\n      /*       console.log(\"next section\"); */\n    }\n  };\n\n  const previousSection = () => {\n    if (selectedSection === 1) {\n      /*       console.log(\"first section\"); */\n    } else {\n      setSelectedSection(selectedSection - 1);\n      setSelectedChapter((selectedSection - 1) * 100);\n      /*       console.log(\"previousSection\"); */\n    }\n  };\n\n  const nextChapter = () => {\n    if (findChapter(selectedSection, selectedChapter + 1) === undefined) {\n      /*       console.log(\"last chapter\"); */\n    } else {\n      /*       console.log(\"next chapter\"); */\n      setSelectedChapter(selectedChapter + 1);\n    }\n  };\n\n  const previousChapter = () => {\n    if (selectedChapter === selectedSection * 100) {\n      /*       console.log(\"first chapter\"); */\n    } else {\n      setSelectedChapter(selectedChapter - 1);\n    }\n  };\n\n  const handleFetchError = (response) => {\n    if (!response.ok) {\n      alert(\n        \"There was an error fetching the rules. \\n Please try again when the winds of magic are more favorable.\"\n      );\n      throw Error(response.statusText);\n    }\n    return response;\n  };\n\n  const handleSearchEvent = (e) => {\n    setSearchField(e.target.value);\n    /*     console.log(searchField); */\n  };\n\n  //fetch rules.\n  useEffect(() => {\n    fetch(staticRulesUrl)\n      .then(handleFetchError)\n      .then((response) => {\n        return response.text();\n      })\n      .then((textString) => {\n        setRules(textString);\n        console.log(\"rules set\");\n      })\n      .catch((error) => {\n        alert(\n          \"There was an error fetching the rules. \\n Please try again when the winds of magic are more favorable.\"\n        );\n        console.log(error);\n      });\n  }, [staticRulesUrl]);\n\n  //parse the rules\n  useEffect(() => {\n    setParsedRules(parser(rules));\n    /*     console.log(\"parsing rules\"); */\n  }, [rules]);\n\n  //set what is shown in main view. Requires that parsedRules exists and has correct data structure. Remember to add error handling at some point\n  //if statement is to ensure both section and chapter have updated.\n  useEffect(() => {\n    if (\n      selectedSection === Math.floor(selectedChapter / 100) ||\n      selectedSection === Math.floor(selectedChapter / 1000)\n    )\n      //checking for chapters 1000+ in case there are more than 9 chapters in the future\n      setSelectedChapterData(findChapter(selectedSection, selectedChapter));\n    /* console.log(\n      \"Chapter data updated. Chapter: \",\n      selectedChapter,\n      \". Section: \",\n      selectedSection\n    ); */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [parsedRules, selectedSection, selectedChapter]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"page-header\">MtG Rules</header>\n\n      <SearchBox\n        placeholder=\"Search shown rules by typing here\"\n        handleChange={handleSearchEvent}\n      />\n      <div className=\"main-container\">\n        <div className=\"main-view\">\n          <NavigationButtons\n            nextChapter={nextChapter}\n            previousChapter={previousChapter}\n            nextSection={nextSection}\n            previousSection={previousSection}\n          ></NavigationButtons>\n          <Chapter\n            id={selectedChapterData.id}\n            title={selectedChapterData.title}\n            sectionTitle={findSection(selectedSection).title}\n            rules={selectedChapterData.rules}\n            searchString={searchField}\n          />\n        </div>\n        <TableOfContents\n          parsedRules={parsedRules}\n          chapterChange={handleChapterChange}\n        />\n      </div>\n      <p className=\"disclaimer\">\n        MtG Rules (this website) is unofficial Fan Content permitted under the\n        Fan Content Policy. Not approved/endorsed by Wizards. Portions of the\n        materials used are property of Wizards of the Coast. ©Wizards of the\n        Coast LLC.\n      </p>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n//import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}