(this["webpackJsonpmtg-rules-front"]=this["webpackJsonpmtg-rules-front"]||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(4),a=n.n(i),s=(n(9),n(2)),l=(n(10),function(e){if(e.length<=0||void 0===e)return[{id:1,title:"loading...",chapters:[{id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}]}];for(var t=e.split("\r\n\r\n").map((function(e){var t=e.trim();return"\r\n"===e.slice(0,3)&&(t=e.slice(3)).trim(),t})).filter((function(e){return!isNaN(e[0])})),n=0;n<9;n++)t.shift();var r=[];return t.forEach((function(e){if(" "===e[2])r.push({id:parseInt(e.slice(0,1)),title:e.slice(3),chapters:[]});else if(" "===e[3])r.push({id:parseInt(e.slice(0,2)),title:e.slice(4),chapters:[]});else if(isNaN(e.slice(0,3))||" "!==e[4]){if(!isNaN(e.slice(0,3))&&!isNaN(e[4])){var t=parseInt(e[0])-1,n=parseInt(e.slice(1,3));if(void 0!==r[t].chapters[n]){var c={id:e.slice(0,e.indexOf(" ")),rule:e.slice(e.indexOf(" ")+1),example:""};-1!==c.rule.indexOf("Example")&&(c.rule=e.slice(e.indexOf(" ")+1,e.indexOf("Example")),c.example=e.slice(e.indexOf("Example"))),r[t].chapters[n].rules.push(c)}}}else{var i=parseInt(e[0])-1;r[i].chapters.push({id:parseInt(e.slice(0,3)),title:e.slice(5),rules:[]})}})),r}),o=(n(11),n(0)),u=function(e){var t=e.id,n=e.rule,r=e.example;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{children:t+" "+n}),Object(o.jsx)("p",{className:"example",children:r})]})},h=(n(13),function(e){var t=e.id,n=e.title,r=e.rules;return Object(o.jsxs)("section",{className:"chapter",children:[Object(o.jsx)("h3",{children:t+". "+n}),r.map((function(e){var t=e.id,n=e.rule,r=e.example;return Object(o.jsx)(u,{id:t,rule:n,example:r},t)}))]})}),d=(n(14),function(e){var t=e.id,n=e.title,r=e.chapterChange;return Object(o.jsx)("button",{onClick:function(){r(t)},children:t+" "+n})}),p=function(e){var t=e.id,n=e.title,r=e.chapters,c=e.chapterChange,i=function(e){c(e)};return Object(o.jsxs)("section",{children:[Object(o.jsx)("h3",{children:t+". "+n}),r.map((function(e){var t=e.id,n=e.title;e.rules;return Object(o.jsx)(d,{chapterChange:i,id:t,title:n},t)}))]})},f=(n(15),function(e){var t=e.parsedRules,n=(e.sectionChange,e.chapterChange),r=e.nextChapter,c=e.previousChapter,i=function(e){n(e)};return Object(o.jsxs)("div",{className:"table-of-contents",children:[Object(o.jsx)("h2",{children:"Contents"}),Object(o.jsx)("button",{onClick:function(){c()},children:"<= Previous Chapter"}),Object(o.jsx)("button",{onClick:function(){r()},children:"Next Chapter =>"}),t.map((function(e){var t=e.id,n=e.title,r=e.chapters;return Object(o.jsx)(p,{id:t,title:n,chapters:r,chapterChange:i},t)}))]})}),j=(n(16),function(e){var t=e.placeholder,n=e.handleChange;return Object(o.jsx)("div",{className:"search-bar",children:Object(o.jsx)("input",{className:"search",type:"search",placeholder:t,onChange:n})})}),b=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(1),a=Object(s.a)(i,2),u=a[0],d=a[1],p=Object(r.useState)(100),b=Object(s.a)(p,2),x=b[0],g=b[1],O=Object(r.useState)({id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}),m=Object(s.a)(O,2),v=m[0],C=m[1],N=Object(r.useState)("https://frozen-dawn-34650.herokuapp.com/media.wizards.com/2021/downloads/MagicCompRules%2020210419.txt"),I=Object(s.a)(N,2),S=I[0],w=(I[1],Object(r.useState)([{id:1,title:"loading...",chapters:[{id:100,title:"loading...",rules:[{id:"100.1.",rule:"Loading Rules..."}]}]}])),E=Object(s.a)(w,2),k=E[0],y=E[1],R=function(e){console.log("set Section: ",e),d(parseInt(e))},L=function(e,t){return console.log("findchapterdata: ",k),console.log("findchapterSection: ",e),console.log("findchapter: ",t),k.find((function(t){return t.id===parseInt(e)})).chapters.find((function(e){return e.id===parseInt(t)}))},M=function(e){if(!e.ok)throw alert("There was an error fetching the rules. \n Please try again when the winds of magic are more favorable."),Error(e.statusText);return e};return Object(r.useEffect)((function(){fetch(S).then(M).then((function(e){return e.text()})).then((function(e){c(e),console.log("rules set")}))}),[S]),Object(r.useEffect)((function(){y(l(n)),console.log("parsing rules")}),[n]),Object(r.useEffect)((function(){C(L(u,x)),console.log("parsed rules change: chapter data update")}),[k,x,u]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{className:"page-header",children:"MtG Rules"}),Object(o.jsx)("section",{children:"Under development, search and table of components non-functional. That means there's no way to cyrrently see any other rules than chapter 100., but please come back tomorrow."}),Object(o.jsx)(j,{placeholder:"Search"}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(h,{id:v.id,title:v.title,rules:v.rules}),Object(o.jsx)(f,{parsedRules:k,nextChapter:function(){void 0===L(u,x+1)?console.log("last chapter"):(console.log("next chapter"),g(x+1))},previousChapter:function(){x===100*u?console.log("first chapter"):g(x-1)},sectionChange:R,chapterChange:function(e){console.log("chapterChange section argument: ",parseInt(e.toString()[0])),parseInt(e.toString()[0])!==u&&R(parseInt(e.toString()[0])),console.log("set chapter: ",x),g(e)}})]})]})};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(b,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.4edc3c94.chunk.js.map